<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Kinetis SDK v.1.1 Demo Applications User&#39;s Guide: Flash Demo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis SDK v.1.1 Demo Applications User&#39;s Guide
   &#160;<span id="projectnumber">Rev. 0</span>
   </div>
   <div id="projectbrief">Freescale Semiconductor, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Demos</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__flash__demo.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Flash Demo</div>  </div>
</div><!--header-->
<div class="contents">
<p>This demo application demonstrates how to use the Flash drivers.</p>
<h1><a class="anchor" id="Ovw"></a>
Overview</h1>
<p>The Flash demo project shows how to erase, program, and performs swap (if available) on the Flash module. Note:</p>
<ol type="1">
<li>On platforms where the SWAP feature is available, this demo operates with the last two sectors of the lower-half and the whole upper-half of Flash memory. On platforms without the SWAP feature, this demo operates with the last six sectors of Flash memory. The user should not store any program or data code in these locations.</li>
<li>The flash swap demo fails if the tested board has already run swap command with swap indicator address different from the value defined in demo. To overcome the issue, erase all chip to un-initialize the swap system and re-run the demo. <br/>
The features include:</li>
</ol>
<ol type="1">
<li>Security status report</li>
<li>Read to non-volatile information memory region</li>
<li>Flash Erase by block or sector, including margin read options</li>
<li>Programming region defined by user</li>
<li>Flash verify support</li>
<li>Flash Swap (if supported on device)</li>
</ol>
<h1><a class="anchor" id="SP"></a>
Supported Platforms</h1>
<p>These Freescale Freedom development platforms and Tower System modules are supported by the KSDK Flash demo.</p>
<p>Platforms with SWAP feature:</p>
<ul>
<li>FRDM-K64F</li>
<li>TWR-K64F120M</li>
<li>TWR-K60D100M</li>
</ul>
<p>Platforms without SWAP feature:</p>
<ul>
<li>FRDM-K22F</li>
<li>FRDM-K22F120MK02</li>
<li>FRDM-K22120MK0264</li>
<li>FRDM-KL03Z48M</li>
<li>FRDM-KL46Z</li>
<li>TWR-K22F120M</li>
<li>TWR-K22F120MK02</li>
<li>TWR-K24F120M</li>
<li>TWR-KV10Z75M</li>
<li>TWR-KV31F120M</li>
<li>TWR-KV31F120MKV30</li>
</ul>
<h1><a class="anchor" id="GS"></a>
Getting Started</h1>
<p>The Flash Demo example code shows how to erase and program the Flash content and use the swap feature if it is supported on the device.</p>
<h2><a class="anchor" id="PtD"></a>
Prepare the Demo</h2>
<ol type="1">
<li>Connect a USB cable between the PC host and the OpenSDA USB port on the board.</li>
<li>Open a serial terminal with these settings:<ul>
<li>115200 (9600 for FRDM-KL03Z48M) for baud rate</li>
<li>8 data bits</li>
<li>No parity</li>
<li>One stop bit</li>
<li>No flow control</li>
</ul>
</li>
<li>Download the program to the target board.</li>
<li>Either press the reset button on your board or launch the debugger in your IDE to begin running the demo.</li>
</ol>
<p>For more detailed instructions, see a Kinetis SDK User's Guide for your board.</p>
<h1><a class="anchor" id="CnD"></a>
Commands/Directions</h1>
<ol>
<li>
Select the Debug target from within the IDE and build the project selected for the target hardware. The default Debug target runs from flash and demonstrates the Swap feature for devices that support Swap (e.g. TWR-K64F120M).  </li>
<li>
Connect one end of the USB cable to a PC host and the other end to the OpenSDA connector on the board. </li>
<li>
Open Terminal program such as TeraTerm, Putty, or Hyperterminal.  </li>
<li>
Configure the Terminal program to select the OpenSDA COMx port for the board using<ul>
<li>115200 8N1: 115200 baud, 8 data bits, No parity, 1 Stop bit.</li>
<li>Or FRDM-KL03Z48M 9600 8N1: 9600 baud, 8 data bits, No parity, 1 Stop bit. </li>
</ul>
</li>
<li>
Connect to the board with the debugger (download &amp; debug), run the program, and view the Terminal messages for Flash operations being performed. </li>
<li>
For devices that support Swap, the Flash_Debug target copies (programs) the application that is running from the lower half to the upper half and then issues swap commands. </li>
<li>
Flash memory blocks are swapped at the next reset. Disconnect debug session and hit the reset button on the board. Note: During swap, some memory locations depending on program flash size (e.g. for TWR-K64F120M: 0x7F100 &amp; 0xFF100) are swapped and displayed on the terminal showing how the memory map changes. </li>
<li>
For devices that do not support swap, view the terminal messages for Flash operations that are occurring for the demo. </li>
<li>
<p class="startli">Terminal displays the message "Flash Demo Complete!" when finished. </p>
<p>Note: Callback functions are not currently supported during flash erase or program operations</p>
<p></p>
<p>Note: For K22F and KV31, Flash erase and program operations are not allowed in High-Speed RUN modes. Therefore, the core clock speed is restricted to 80 MHz or less.</p>
<p class="endli"></p>
</li>
</ol>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">Fri Dec 12 2014 &copy; 2014 Freescale Semiconductor, Inc. All rights reserved. 
    </li>
  </ul>
</div>
</body>
</html>
